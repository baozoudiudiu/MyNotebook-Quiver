{
  "title": "UIWebView 获取图片,给图片添加点击事件 (swift 版)",
  "cells": [
    {
      "type": "text",
      "data": "<span style=\"color: rgb(83, 101, 121); font-family: &quot;Courier New&quot;; font-size: 14px; background-color: rgb(240, 240, 240);\">//MARK: - UIWebViewDelegate</span><br><div>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; <span style=\"color: #9b2393\">func</span> webViewDidFinishLoad(<span style=\"color: #9b2393\">_</span> webView: <span style=\"color: #5c2699\">UIWebView</span>) {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(83, 101, 121); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span>// 拿到网页中的所有图片</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> getImageJs = <span style=\"color: #c41a16\">\"\"\"</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">function getImages(){\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; var objs = document.getElementsByTagName(\"img\");\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; var imgScr = '';\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; for(var i=0;i&lt;objs.length;i++){\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; imgScr = imgScr + objs[i].src + '+';\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; };\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; return imgScr;\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">};</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">\"\"\"</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(57, 0, 160); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style=\"color: #326d74\">webview</span><span style=\"color: #000000\">.</span>stringByEvaluatingJavaScript<span style=\"color: #000000\">(from: getImageJs)</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> urlResult = webView.<span style=\"color: #3900a0\">stringByEvaluatingJavaScript</span>(from: <span style=\"color: #c41a16\">\"getImages()\"</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #245256\">LLog</span>(<span style=\"color: #c41a16\">\"抓取的图片: </span>\\<span style=\"color: #c41a16\">(</span>urlResult.<span style=\"color: #245256\">validable</span>()<span style=\"color: #c41a16\">)\"</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240); min-height: 16px;\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(83, 101, 121); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span>// 给图片添加点击事件</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> addClickJs = <span style=\"color: #c41a16\">\"\"\"</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">function registerImageClickAction(){\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp;&nbsp; &nbsp; var imgs=document.getElementsByTagName('img');\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp;&nbsp; &nbsp; var length=imgs.length;\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp;&nbsp; &nbsp; for(var i=0;i&lt;length;i++){\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; img=imgs[i];\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; img.onclick=function(){\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; window.location.href='image-preview:'+this.src}\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">&nbsp;&nbsp; &nbsp; }\\</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">}</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(196, 26, 22); background-color: rgb(240, 240, 240);\">\"\"\"</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; webView.<span style=\"color: #3900a0\">stringByEvaluatingJavaScript</span>(from: addClickJs)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(57, 0, 160); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; webView.</span>stringByEvaluatingJavaScript<span style=\"color: #000000\">(from: </span><span style=\"color: #c41a16\">\"registerImageClickAction()\"</span><span style=\"color: #000000\">)</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240); min-height: 16px;\">&nbsp;&nbsp; &nbsp;</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; <span style=\"color: #9b2393\">func</span> webView(<span style=\"color: #9b2393\">_</span> webView: <span style=\"color: #5c2699\">UIWebView</span>, shouldStartLoadWith request: <span style=\"color: #5c2699\">URLRequest</span>, navigationType: <span style=\"color: #5c2699\">UIWebView</span>.<span style=\"color: #5c2699\">NavigationType</span>) -&gt; <span style=\"color: #5c2699\">Bool</span> {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(83, 101, 121); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span>// 图片点事事件捕获</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">if</span> <span style=\"color: #9b2393\">let</span> url = request.<span style=\"color: #5c2699\">url</span>, <span style=\"color: #9b2393\">let</span> scheme = url.<span style=\"color: #5c2699\">scheme</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> str = <span style=\"color: #c41a16\">\"image-preview\"</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">if</span> scheme.<span style=\"color: #3900a0\">elementsEqual</span>(str)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">if</span> <span style=\"color: #9b2393\">let</span> range = url.<span style=\"color: #5c2699\">absoluteString</span>.<span style=\"color: #3900a0\">range</span>(of: str)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> absoluteString = url.<span style=\"color: #5c2699\">absoluteString</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">var</span> path = <span style=\"color: #5c2699\">String</span>(absoluteString[absoluteString.<span style=\"color: #3900a0\">index</span>(after: range.<span style=\"color: #5c2699\">upperBound</span>)..&lt;absoluteString.<span style=\"color: #5c2699\">endIndex</span>])</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">var</span> charSet = <span style=\"color: #5c2699\">CharacterSet</span>.<span style=\"color: #5c2699\">urlQueryAllowed</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; charSet.<span style=\"color: #3900a0\">insert</span>(charactersIn: <span style=\"color: #c41a16\">\"#\"</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; path = path.<span style=\"color: #3900a0\">addingPercentEncoding</span>(withAllowedCharacters: charSet).<span style=\"color: #245256\">validable</span>()</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #245256\">showImageWithPath</span>(path)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">return</span> <span style=\"color: #9b2393\">false</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(155, 35, 147); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span>return<span style=\"color: #000000\"> </span>true</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240); min-height: 16px;\">&nbsp;&nbsp; &nbsp;</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(63, 80, 98); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; </span>/// webView图片点击事件处理</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; <span style=\"color: #9b2393\">private</span> <span style=\"color: #9b2393\">func</span> showImageWithPath(<span style=\"color: #9b2393\">_</span> path: <span style=\"color: #5c2699\">String</span>) {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(50, 109, 116); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style=\"color: #9b2393\">if</span><span style=\"color: #000000\"> </span><span style=\"color: #9b2393\">nil</span><span style=\"color: #000000\"> == </span><span style=\"color: #9b2393\">self</span><span style=\"color: #000000\">.</span>browerImageView</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">browerImageView</span> = <span style=\"color: #5c2699\">UIImageView</span>.<span style=\"color: #5c2699\">init</span>(frame: <span style=\"color: #5c2699\">CGRect</span>.<span style=\"color: #5c2699\">zero</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(50, 109, 116); background-color: rgb(240, 240, 240);\"><span style=\"color: #000000\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=\"color: #9b2393\">self</span><span style=\"color: #000000\">.</span>imageHelper<span style=\"color: #000000\">.</span><span style=\"color: #245256\">scale</span><span style=\"color: #000000\">(</span>browerImageView<span style=\"color: #000000\">!)</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">if</span> <span style=\"color: #9b2393\">let</span> showView = <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">showView</span> {<span style=\"color: #326d74\">HUD</span>.<span style=\"color: #245256\">show</span>(<span style=\"color: #326d74\">HUDContentType</span>.<span style=\"color: #245256\">gif</span>, onView: showView)}</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #5c2699\">DispatchQueue</span>.<span style=\"color: #3900a0\">global</span>().<span style=\"color: #3900a0\">async</span>(execute: {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> imgUrl = <span style=\"color: #5c2699\">URL</span>.<span style=\"color: #5c2699\">init</span>(string: path)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">guard</span> <span style=\"color: #9b2393\">let</span> u = imgUrl <span style=\"color: #9b2393\">else</span> {<span style=\"color: #9b2393\">return</span>}</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">guard</span> <span style=\"color: #9b2393\">let</span> data = <span style=\"color: #9b2393\">try</span>? <span style=\"color: #5c2699\">Data</span>.<span style=\"color: #5c2699\">init</span>(contentsOf: u) <span style=\"color: #9b2393\">else</span> {<span style=\"color: #9b2393\">return</span>}</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">let</span> img = <span style=\"color: #5c2699\">UIImage</span>.<span style=\"color: #5c2699\">init</span>(data: data)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #5c2699\">DispatchQueue</span>.<span style=\"color: #5c2699\">main</span>.<span style=\"color: #3900a0\">async</span>(execute: {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #326d74\">HUD</span>.<span style=\"color: #245256\">hide</span>()</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">if</span> <span style=\"color: #9b2393\">let</span> <span style=\"color: #9b2393\">_</span> = <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">showView</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">browerImageView</span>?.<span style=\"color: #5c2699\">image</span> = img</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">browerImageView</span>?.<span style=\"color: #5c2699\">frame</span> = <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">webview</span>.<span style=\"color: #5c2699\">bounds</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #5c2699\">contentView</span>.<span style=\"color: #3900a0\">addSubview</span>(<span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">browerImageView</span>!)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">imageHelper</span>.<span style=\"color: #245256\">tapAction</span>(<span style=\"color: #9b2393\">nil</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>.<span style=\"color: #326d74\">imageHelper</span>.<span style=\"color: #326d74\">smallCompletion</span> = { [<span style=\"color: #9b2393\">weak</span> <span style=\"color: #9b2393\">self</span>] <span style=\"color: #9b2393\">in</span></p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"color: #9b2393\">self</span>?.<span style=\"color: #326d74\">browerImageView</span>?.<span style=\"color: #3900a0\">removeFromSuperview</span>()</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; })</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; &nbsp; &nbsp; } <span style=\"color: #9b2393\">as</span> <span style=\"color: #9b2393\">@convention</span>(block) () -&gt; <span style=\"color: #5c2699\">Void</span>)</p>\n<p style=\"margin: 0px; font-stretch: normal; font-size: 14px; line-height: normal; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); background-color: rgb(240, 240, 240);\">&nbsp; &nbsp; }</p></div>"
    }
  ]
}